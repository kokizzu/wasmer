<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An implementation of task management"><title>VirtualTaskManager in wasmer_wasix::runtime::task_manager - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-c4dbdcde0fbd8430.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../../static.files/light-db279b6232be9c13.css"><link rel="stylesheet" disabled href="../../../static.files/dark-cf923f49f397b216.css"><link rel="stylesheet" disabled href="../../../static.files/ayu-be46fdc453a55015.css"><script src="../../../static.files/storage-3891ce972e3a2bf8.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-98a684e84ae5b08b.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="icon" href="https://wasmer.io/images/icons/favicon-32x32.png"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../../wasmer_wasix/index.html"><img src="https://github.com/wasmerio.png?size=200" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../../wasmer_wasix/index.html">
                <img src="https://github.com/wasmerio.png?size=200" alt="logo"></a><h2 class="location"><a href="#">VirtualTaskManager</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.sleep_now">sleep_now</a></li><li><a href="#tymethod.task_dedicated">task_dedicated</a></li><li><a href="#tymethod.task_shared">task_shared</a></li><li><a href="#tymethod.task_wasm">task_wasm</a></li><li><a href="#tymethod.thread_parallelism">thread_parallelism</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.build_memory">build_memory</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In wasmer_wasix::runtime::task_manager</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../../index.html">wasmer_wasix</a>::<wbr><a href="../index.html">runtime</a>::<wbr><a href="index.html">task_manager</a>::<wbr><a class="trait" href="#">VirtualTaskManager</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../src/wasmer_wasix/runtime/task_manager/mod.rs.html#97-162">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait VirtualTaskManager: <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> + <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static {
    // Required methods
    fn <a href="#tymethod.sleep_now" class="fn">sleep_now</a>(
        &amp;self,
        time: <a class="struct" href="../../syscalls/struct.Duration.html" title="struct wasmer_wasix::syscalls::Duration">Duration</a>
    ) -&gt; <a class="struct" href="../../syscalls/struct.Pin.html" title="struct wasmer_wasix::syscalls::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.69.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/1.69.0/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.task_shared" class="fn">task_shared</a>(
        &amp;self,
        task: <a class="struct" href="https://doc.rust-lang.org/1.69.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>() -&gt; BoxFuture&lt;'static, <a class="primitive" href="https://doc.rust-lang.org/1.69.0/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static&gt;
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.69.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.69.0/std/primitive.unit.html">()</a>, <a class="enum" href="../../os/task/thread/enum.WasiThreadError.html" title="enum wasmer_wasix::os::task::thread::WasiThreadError">WasiThreadError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.task_wasm" class="fn">task_wasm</a>(&amp;self, task: <a class="struct" href="struct.TaskWasm.html" title="struct wasmer_wasix::runtime::task_manager::TaskWasm">TaskWasm</a>&lt;'_, '_&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.69.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.69.0/std/primitive.unit.html">()</a>, <a class="enum" href="../../os/task/thread/enum.WasiThreadError.html" title="enum wasmer_wasix::os::task::thread::WasiThreadError">WasiThreadError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.task_dedicated" class="fn">task_dedicated</a>(
        &amp;self,
        task: <a class="struct" href="https://doc.rust-lang.org/1.69.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>() + <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static&gt;
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.69.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.69.0/std/primitive.unit.html">()</a>, <a class="enum" href="../../os/task/thread/enum.WasiThreadError.html" title="enum wasmer_wasix::os::task::thread::WasiThreadError">WasiThreadError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.thread_parallelism" class="fn">thread_parallelism</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.69.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.69.0/std/primitive.usize.html">usize</a>, <a class="enum" href="../../os/task/thread/enum.WasiThreadError.html" title="enum wasmer_wasix::os::task::thread::WasiThreadError">WasiThreadError</a>&gt;;

    // Provided method
    fn <a href="#method.build_memory" class="fn">build_memory</a>(
        &amp;self,
        store: &amp;mut StoreMut&lt;'_&gt;,
        spawn_type: <a class="enum" href="enum.SpawnMemoryType.html" title="enum wasmer_wasix::runtime::task_manager::SpawnMemoryType">SpawnMemoryType</a>&lt;'_&gt;
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.69.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.69.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../syscalls/struct.Memory.html" title="struct wasmer_wasix::syscalls::Memory">Memory</a>&gt;, <a class="enum" href="../../os/task/thread/enum.WasiThreadError.html" title="enum wasmer_wasix::os::task::thread::WasiThreadError">WasiThreadError</a>&gt; { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>An implementation of task management</p>
</div></details><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.sleep_now" class="method"><a class="srclink rightside" href="../../../src/wasmer_wasix/runtime/task_manager/mod.rs.html#136-139">source</a><h4 class="code-header">fn <a href="#tymethod.sleep_now" class="fn">sleep_now</a>(
    &amp;self,
    time: <a class="struct" href="../../syscalls/struct.Duration.html" title="struct wasmer_wasix::syscalls::Duration">Duration</a>
) -&gt; <a class="struct" href="../../syscalls/struct.Pin.html" title="struct wasmer_wasix::syscalls::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.69.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/1.69.0/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static&gt;&gt;</h4></section></summary><div class="docblock"><p>Invokes whenever a WASM thread goes idle. In some runtimes (like singlethreaded
execution environments) they will need to do asynchronous work whenever the main
thread goes idle and this is the place to hook for that.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.task_shared" class="method"><a class="srclink rightside" href="../../../src/wasmer_wasix/runtime/task_manager/mod.rs.html#143-146">source</a><h4 class="code-header">fn <a href="#tymethod.task_shared" class="fn">task_shared</a>(
    &amp;self,
    task: <a class="struct" href="https://doc.rust-lang.org/1.69.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>() -&gt; BoxFuture&lt;'static, <a class="primitive" href="https://doc.rust-lang.org/1.69.0/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static&gt;
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.69.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.69.0/std/primitive.unit.html">()</a>, <a class="enum" href="../../os/task/thread/enum.WasiThreadError.html" title="enum wasmer_wasix::os::task::thread::WasiThreadError">WasiThreadError</a>&gt;</h4></section></summary><div class="docblock"><p>Starts an asynchronous task that will run on a shared worker pool
This task must not block the execution or it could cause a deadlock</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.task_wasm" class="method"><a class="srclink rightside" href="../../../src/wasmer_wasix/runtime/task_manager/mod.rs.html#150">source</a><h4 class="code-header">fn <a href="#tymethod.task_wasm" class="fn">task_wasm</a>(&amp;self, task: <a class="struct" href="struct.TaskWasm.html" title="struct wasmer_wasix::runtime::task_manager::TaskWasm">TaskWasm</a>&lt;'_, '_&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.69.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.69.0/std/primitive.unit.html">()</a>, <a class="enum" href="../../os/task/thread/enum.WasiThreadError.html" title="enum wasmer_wasix::os::task::thread::WasiThreadError">WasiThreadError</a>&gt;</h4></section></summary><div class="docblock"><p>Starts an WebAssembly task will will run on a dedicated thread
pulled from the worker pool that has a stateful thread local variable</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.task_dedicated" class="method"><a class="srclink rightside" href="../../../src/wasmer_wasix/runtime/task_manager/mod.rs.html#155-158">source</a><h4 class="code-header">fn <a href="#tymethod.task_dedicated" class="fn">task_dedicated</a>(
    &amp;self,
    task: <a class="struct" href="https://doc.rust-lang.org/1.69.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>() + <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static&gt;
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.69.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.69.0/std/primitive.unit.html">()</a>, <a class="enum" href="../../os/task/thread/enum.WasiThreadError.html" title="enum wasmer_wasix::os::task::thread::WasiThreadError">WasiThreadError</a>&gt;</h4></section></summary><div class="docblock"><p>Starts an asynchronous task will will run on a dedicated thread
pulled from the worker pool. It is ok for this task to block execution
and any async futures within its scope</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.thread_parallelism" class="method"><a class="srclink rightside" href="../../../src/wasmer_wasix/runtime/task_manager/mod.rs.html#161">source</a><h4 class="code-header">fn <a href="#tymethod.thread_parallelism" class="fn">thread_parallelism</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.69.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.69.0/std/primitive.usize.html">usize</a>, <a class="enum" href="../../os/task/thread/enum.WasiThreadError.html" title="enum wasmer_wasix::os::task::thread::WasiThreadError">WasiThreadError</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the amount of parallelism that is possible on this platform</p>
</div></details></div><h2 id="provided-methods" class="small-section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.build_memory" class="method"><a class="srclink rightside" href="../../../src/wasmer_wasix/runtime/task_manager/mod.rs.html#101-131">source</a><h4 class="code-header">fn <a href="#method.build_memory" class="fn">build_memory</a>(
    &amp;self,
    store: &amp;mut StoreMut&lt;'_&gt;,
    spawn_type: <a class="enum" href="enum.SpawnMemoryType.html" title="enum wasmer_wasix::runtime::task_manager::SpawnMemoryType">SpawnMemoryType</a>&lt;'_&gt;
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.69.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.69.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../syscalls/struct.Memory.html" title="struct wasmer_wasix::syscalls::Memory">Memory</a>&gt;, <a class="enum" href="../../os/task/thread/enum.WasiThreadError.html" title="enum wasmer_wasix::os::task::thread::WasiThreadError">WasiThreadError</a>&gt;</h4></section></summary><div class="docblock"><p>Build a new Webassembly memory.</p>
<p>May return <code>None</code> if the memory can just be auto-constructed.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-VirtualTaskManager-for-TokioTaskManager" class="impl"><a class="srclink rightside" href="../../../src/wasmer_wasix/runtime/task_manager/tokio.rs.html#93-188">source</a><a href="#impl-VirtualTaskManager-for-TokioTaskManager" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.VirtualTaskManager.html" title="trait wasmer_wasix::runtime::task_manager::VirtualTaskManager">VirtualTaskManager</a> for <a class="struct" href="tokio/struct.TokioTaskManager.html" title="struct wasmer_wasix::runtime::task_manager::tokio::TokioTaskManager">TokioTaskManager</a></h3></section><section id="impl-VirtualTaskManager-for-D" class="impl"><a class="srclink rightside" href="../../../src/wasmer_wasix/runtime/task_manager/mod.rs.html#164-205">source</a><a href="#impl-VirtualTaskManager-for-D" class="anchor">§</a><h3 class="code-header">impl&lt;D, T&gt; <a class="trait" href="trait.VirtualTaskManager.html" title="trait wasmer_wasix::runtime::task_manager::VirtualTaskManager">VirtualTaskManager</a> for D<span class="where fmt-newline">where
    D: <a class="trait" href="../../syscalls/trait.Deref.html" title="trait wasmer_wasix::syscalls::Deref">Deref</a>&lt;Target = T&gt; + <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> + <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/1.69.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static,
    T: <a class="trait" href="trait.VirtualTaskManager.html" title="trait wasmer_wasix::runtime::task_manager::VirtualTaskManager">VirtualTaskManager</a> + ?<a class="trait" href="https://doc.rust-lang.org/1.69.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></div><script src="../../../implementors/wasmer_wasix/runtime/task_manager/trait.VirtualTaskManager.js" async></script></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="wasmer_wasix" data-themes="" data-resource-suffix="" data-rustdoc-version="1.69.0 (84c898d65 2023-04-16)" data-search-js="search-8a59a8356673ec1f.js" data-settings-js="settings-f0c5c39777a9a2f6.js" data-settings-css="settings-0bcba95ff279c1db.css" ></div></body></html>